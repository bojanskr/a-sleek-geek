---
layout: post
title: FileUpload Control in ASP.NET and IIS7
date: 2015-03-12 10:06:40.000000000 +01:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- IIS
- WEB
tags:
- ".NET"
- WINDOWS
meta:
  _wpas_skip_tumblr: '1'
  _wpas_skip_path: '1'
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  publicize_facebook_url: https://facebook.com/10153119157469544
  _wpas_done_10664483: '1'
  _publicize_done_external: a:2:{s:8:"facebook";a:2:{i:10153119055144544;b:1;i:24824976;s:52:"https://facebook.com/109859327422450_159339359141113";}s:7:"twitter";a:1:{i:23158388;s:55:"https://twitter.com/bojanskr/status/1299112022311927809";}}
  publicize_google_plus_url: https://plus.google.com/109496988347398087332/posts/TAPVaLntf2S
  _wpas_done_10664478: '1'
  publicize_twitter_user: bojanskr
  publicize_twitter_url: http://t.co/AuwVkJ13NT
  _wpas_done_10664475: '1'
  publicize_linkedin_url: https://www.linkedin.com/updates?discuss=&scope=13012322&stype=M&topic=5981726778316636160&type=U&a=ud9g
  _wpas_done_10664490: '1'
  _oembed_c46f30a8641d71591a9c73a52c88aa3f: "{{unknown}}"
  _oembed_1ca01d60b297a42b82aa7c2528bdc57f: "{{unknown}}"
  _publicize_job_id: '48192254653'
  _publicize_done_22258584: '1'
  _wpas_done_23158388: '1'
  _oembed_9a36a4eb207f43208ebd3473fcc3bd4c: "{{unknown}}"
  _publicize_done_22258588: '1'
  _wpas_done_23158396: '1'
  _publicize_done_23096508: '1'
  _wpas_done_24824976: '1'
  _oembed_4664a78b82c3eec88f74e03c1f94bcab: "{{unknown}}"
  _import_session_id: 5f57b340a397b
  _import_original_post_id: '9'
  original_post_id: '1655'
  _wp_old_slug: '1655'
author:
  login: bojanskr
  email: bojanskr@gmail.com
  display_name: TehBoyan
  first_name: Bojan
  last_name: Skrchevski
permalink: "/2015/03/12/fileupload-control-in-asp-net-and-iis7/"
---
<p><!-- wp:paragraph --></p>
<p><span class="Apple-style-span">When you want to work with the&nbsp;</span><b>FileUpload&nbsp;</b><span class="Apple-style-span">control in ASP.NET probably the most important thing to have in mind is that you are working with files, and files can get big, sometimes really big. By default with the FIleUpload control you can upload files that are&nbsp;4096 KB (4 MB) in size.</span></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:more --><br />
<!--more--><br />
<!-- /wp:more --></p>
<p><!-- wp:paragraph --></p>
<p><span class="Apple-style-span">Of course, you can override this setting by changing the </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">httpRuntime maxRequestLegth </span><span class="Apple-style-span">in </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">web.config</span><span class="Apple-style-span">&nbsp;file of </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">machine.config&nbsp;</span><span class="Apple-style-span">file (if you wan't to override the&nbsp;setting&nbsp;on the whole computer for every application etc.). For example:</span></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">&lt;system.web&gt;</span></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">&nbsp; &nbsp;&lt;httpRuntime maxRequestLength="2097151" enable="true" /&gt;</span></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">&lt;/system.web&gt;</span></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p><span class="Apple-style-span">(remember that the size is in kilobytes, so this is sround 2GB)</span></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p><span class="Apple-style-span">Now, this is all fine. You change it, you test it locally and it all works fine. At least that's what I did. I even hosted it on the local IIS....Untill....</span></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p><span class="Apple-style-span">I published the application to a server that had IIS7 installed on it and I started getting a 404 Error. It was very frustrating really. Then I went trough the Microsoft documentation and found out that things are different on IIS7</span>. <span class="Apple-style-span">There's a completely different setting called </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">maxAllowedContentLength </span><span class="Apple-style-span">under </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">requestLimits </span><span class="Apple-style-span">under </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">security</span><span class="Apple-style-span">. Example:</span></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">&lt;security&gt;<br />&lt;requestFiltering&gt;<br />&lt;requestLimits maxAllowedContentLength="2097151" /&gt;<br />&lt;/requestFiltering&gt;<br />&lt;/security&gt;</span></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p><span class="Apple-style-span">Turns out that </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">requestLimits </span><span class="Apple-style-span">is far more than just limiting the size of the files. Here's a link for those who want to dig a little deeper on the issue:</span><span class="Apple-style-span" style="color:#333333;"><span class="Apple-style-span"><br /></span></span></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>http://www.iis.net/ConfigReference/system.webServer/security/requestFiltering/requestLimits</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p><span class="Apple-style-span"><br />Hope this helps someone,</span></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Bojan</p>
<p><!-- /wp:paragraph --></p>
